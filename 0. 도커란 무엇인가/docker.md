## 개요

도커는 **컨테이너 기반의 오픈소스 가상화 플랫폼**이다.

### 탄생 비화

기존의 서버 관리는 생각보다 복잡하다. 내부에서 뭐 하나만 잘못 되더라도 서버 전체에 영향을 끼칠 수도 있다.
즉, 다음과 같은 상황이다. 내부적으로 엉켜있는 시스템 아키텍쳐에서 어떠한 하나의 버전, 예를 들어서 Java의 버전을 11에서 16으로 올린다고 가정해보자.
위 문제로 인해 Gradle 이든 다른 부분의 의존성으로 인해서 서버 자체가 정상적으로 실행되지 않을 수 있다.

위처럼, 개발 환경은 계속해서 바뀔 수 있다. 버전이라던지 언어라던지

기존에 즉, 도커가 등장하기 이전에 서버를 관리하기 위해서는 다음과 같은 과정을 필요로 했다.
하나의 시나리오를 살펴보자.

> 유저 추가 -> 시스템 환경 변수 설정 -> 방화벽 설정 -> 네트워크 연결 -> 의존성 주입
> -> 언어 설치 -> Git clone -> 패키지 설치 -> 설정 파일 추가 -> DB 추가 -> Proxy 서버 추가 -> 드디어 실행!!

그리고 생각보다 어떠한 환경을 설치하는 것이 쉬운 일이 아니다. 가령 서버 인프라 개발자에게 처음 요구했던 것은 잘 된 문서화였을 것이다. 유저 매뉴얼처럼
이 부분에서는 이렇게 설치를 진행하고 이렇게 하면 돼요. 처럼 간단하고 명료하게 설치를 할 수 있는 그런 매뉴얼말이다.
하지만, 시대는 변화하고 애플리케이션은 발전한다. 그리고 다음의 프로젝트가 같은 OS에서 돌아간다는 보장도 할 수가 없다. 그렇게 되면 열심히 작성했던 문서가 무용지물이 된다.

이를 해결하기 위해 가상머신을 사용하게 되었지만 **가상머신은 OS에 종속적이라 메모리나 속도가 시스템에서 사용하는 것보다 현저히 느렸다.**
또, 이미 생성된 가상머신 이미지를 배포하기도 어려웠고 설치를 잘못해둔다면 용량이 너무 커진다는 문제도 있었다.

하지만, 구글에서는 위와 같은 방식이 이미 안 좋다고 판단하여, 리눅스의 가상화 기법을 통해서 메모리나 CPU 사용량을 제한하며 여러 프로그램들을 돌릴 수 있는 환경을 만들어 사용하고 있었다. 다른 개발자들도 이러한 것의 장점을 알고 도입을 해보려고 했지만, 리눅스의 대한 이해도가 높아야 하는 러닝커브가 높은 과제였다.

이런 상황에서 2013년에 도커가 탄생하게 되었다.

### 도커를 사용한다면

어떠한 프로그램을 컨테이너 위에서 바로 실행 할 수 있게 해주고, 어떠한 환경에서도 잘 돌아간다.
가상 머신과 매우 비슷해보이지만 가상 머신은 고유한 OS 위에서 떠야하지만 도커는 OS에 종속적이지 않고 다른 프로그램들과도 독립적으로 동작한다.

따라서, **가상머신에 비해서 효율적이고 속도도 빠르다.**

## 도커의 특징

기존의 VM은 HiperVisor 위에서 Guest OS를 띄워야한다는 문제가 있었지만 Docker는 Docker Engine 위에서 돌아간다.
도커의 특징들을 하나 하나 살펴보자.

### 확장성과 이식성

- 도커가 설치되어 있다면 어디서든 컨테이너를 실행 할 수 있다.
- 특정 회사나 서비스에 종속적이지 않다.
- 쉽게 개발서버를 만들 수 있고, 테스트 서버 생성도 간편하다.

### 표준성

- 도커를 사용하지 않는 경우 서비스들의 배포방식이 제 각각 다르지만 컨테이너라는 표준으로 서버를 배포하므로 모든 서비스들의 배포과정이 동일해진다.

### 이미지

- 이미지에서 컨테이너를 생성하므로 이미지를 만드는 과정이 필요하고, dockerkile을 이용하여 이미지를 만들고 재현이 가능
- 빌드 서버에서 이미지를 만들면 해당 이미지를 이미지 저장소에 저장하고 운영서버에서 이미지를 불러옴

### 설정관리

- 설정을 환경변수로 제어한다
- 컨테이너를 띄울 때 환경 변수를 같이 지정하여 하나의 이미지가 환경 변수에 따라 동적으로 설정 파일이 생성하도록 만들어져야 한다.

### 자원관리

- 컨테이너는 삭제 후 새로 만들면 모든 데이터가 초기화 된다.
- 따라서, 업로드 파일을 외부 스토리지와 링크하여 사용하거나 S3 같은 별도의 저장소를 사용하거나 세션이나 캐시를 외부의 캐시 서버에 분리해야 한다.

## 결론

1. 클라우드 이미지보다 **관리하기가 쉽다.**
2. **다른 프로세스와 격리**되어 가상머신처럼 사용하지만 **성능저하가 거의 없다.**
3. **복잡한 기술을 몰라도 사용** 할 수 있다.
4. 이미지 **빌드 기록을 커밋에 남겨 버전 관리가 가능**하다.
5. **코드와 설정으로 관리하여 재현 및 수정이 가능**하다.
6. **오픈소스이기에 특정 회사 기술에 종속적이지 않다.**

도커는 컨테이너의 기술을 사용한 것이고, 컨테이너의 기술을 도커만 사용을 했었지만 최근에는 컨테이너가 발전을 하게 되면서 쿠버네티스 등등이 등장을 하게 되었다.

이에 따라, 스케쥴링, 클러스터링, 서비스 디스커버리 등의 새로운 기능들이 컨테이너에 등장을 하게 되었다.